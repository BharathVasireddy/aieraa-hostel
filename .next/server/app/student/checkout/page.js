(()=>{var e={};e.id=4663,e.ids=[4663],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13594:(e,s,r)=>{Promise.resolve().then(r.bind(r,38129))},13964:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19169:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},28561:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37972:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>o,routeModule:()=>x,tree:()=>c});var t=r(65239),a=r(48088),n=r(88170),i=r.n(n),l=r(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let c={children:["",{children:["student",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92275)),"/Users/bharat/Desktop/aieraa-hostel/src/app/student/checkout/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/bharat/Desktop/aieraa-hostel/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/bharat/Desktop/aieraa-hostel/src/app/student/checkout/page.tsx"],h={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/student/checkout/page",pathname:"/student/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},38129:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>y});var t=r(60687),a=r(28561),n=r(58869),i=r(19169),l=r(48340),d=r(79410),c=r(32192),o=r(48730),h=r(85778),x=r(13964),m=r(43210),p=r(16189),u=r(83714);r(96758);var g=r(26386);function y(){let e=(0,p.useRouter)(),{user:s}=(0,g.J)(),[r,y]=(0,m.useState)(null),[b,j]=(0,m.useState)([]),[v,N]=(0,m.useState)(!0),[f,w]=(0,m.useState)(!1),[k,A]=(0,m.useState)(""),[P,M]=(0,m.useState)("razorpay"),[C,S]=(0,m.useState)(""),D=async()=>{if(!r||!s)return void S("Missing cart or user data");w(!0),S("");try{let s={orderDate:r.orderDate,items:Object.entries(r.items).map(([e,s])=>({menuItemId:e,quantity:s,notes:k})),specialInstructions:k,paymentMethod:P,totalAmount:r.totalAmount},t=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await t.json();t.ok?(localStorage.removeItem("orderCart"),localStorage.removeItem("tempCart"),e.push(`/student/order-success?orderId=${a.order.id}&orderNumber=${a.order.orderNumber}`)):S(a.error||"Failed to place order")}catch(e){console.error("Error placing order:",e),S("Failed to place order. Please try again.")}finally{w(!1)}};if(!s)return(0,t.jsx)(u.A,{showDatePicker:!1,children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})})});if(v)return(0,t.jsx)(u.A,{showDatePicker:!1,children:(0,t.jsx)("div",{className:"px-4 py-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4 mx-auto"}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})});if(C&&!r)return(0,t.jsx)(u.A,{showDatePicker:!1,children:(0,t.jsx)("div",{className:"px-4 py-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:C}),(0,t.jsx)("button",{onClick:()=>e.push("/student/menu"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to Menu"})]})})});let _=b.reduce((e,s)=>e+s.price*s.quantity,0),q=Math.round(_*(s.university?.settings?.taxRate||.1)),z=_+q;return(0,t.jsxs)(u.A,{showDatePicker:!1,children:[(0,t.jsxs)("div",{className:"px-4 py-6 pb-32",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Summary"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Review your order before placing"})]}),C&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-red-800 text-sm",children:C})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 border border-gray-100 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(a.A,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Your Order"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["(",b.length," items)"]})]}),(0,t.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:["₹",e.price*e.quantity]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["₹",e.price," each"]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 border border-gray-100 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(n.A,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Student Details"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:s.name})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(i.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:s.email})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(l.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:s.phone||"Not provided"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:s.university?.name})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["Room ",s.roomNumber]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["Meal Date: ",r?new Date(r.orderDate).toLocaleDateString():""]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 border border-gray-100 shadow-sm",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Special Instructions"}),(0,t.jsx)("textarea",{value:k,onChange:e=>A(e.target.value),placeholder:"Any special requests or dietary notes...",className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none",rows:3})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 border border-gray-100 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Payment Method"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"razorpay",checked:"razorpay"===P,onChange:e=>M(e.target.value),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"}),(0,t.jsx)("span",{className:"text-gray-900",children:"Pay Online (Razorpay)"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"cash",checked:"cash"===P,onChange:e=>M(e.target.value),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"}),(0,t.jsx)("span",{className:"text-gray-900",children:"Pay at Collection Counter"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 border border-gray-100 shadow-sm",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Bill Summary"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["₹",_]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsxs)("span",{children:["Tax (",Math.round(100*(s.university?.settings?.taxRate||.1)),"%)"]}),(0,t.jsxs)("span",{children:["₹",q]})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:(0,t.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-gray-900",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["₹",z]})]})})]})]})]}),(0,t.jsx)("div",{className:"fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 p-4 z-50",children:(0,t.jsx)("button",{onClick:D,disabled:f||0===b.length,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 ${f||0===b.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 active:scale-98 shadow-lg"}`,children:f?(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Placing Order..."})]}):(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(x.A,{className:"w-5 h-5"}),(0,t.jsxs)("span",{children:["Place Order - ₹",z]})]})})})]})}r(25799)},48340:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66738:(e,s,r)=>{Promise.resolve().then(r.bind(r,92275))},79410:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},85778:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},92275:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bharat/Desktop/aieraa-hostel/src/app/student/checkout/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bharat/Desktop/aieraa-hostel/src/app/student/checkout/page.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[4243,4848,9764,3645,3714],()=>r(37972));module.exports=t})();