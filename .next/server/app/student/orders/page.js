(()=>{var e={};e.id=2050,e.ids=[2050],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12837:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]])},13861:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},16442:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bharat/Desktop/aieraa-hostel/src/app/student/orders/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bharat/Desktop/aieraa-hostel/src/app/student/orders/page.tsx","default")},17976:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>d.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=t(65239),a=t(48088),n=t(88170),d=t.n(n),l=t(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);t.d(r,i);let o={children:["",{children:["student",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,16442)),"/Users/bharat/Desktop/aieraa-hostel/src/app/student/orders/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/Users/bharat/Desktop/aieraa-hostel/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/bharat/Desktop/aieraa-hostel/src/app/student/orders/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/student/orders/page",pathname:"/student/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19080:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35071:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},38047:(e,r,t)=>{Promise.resolve().then(t.bind(t,16442))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74999:(e,r,t)=>{Promise.resolve().then(t.bind(t,88120))},78122:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},88120:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(60687),a=t(43210),n=t(93613),d=t(5336),l=t(46234),i=t(19080),o=t(35071),c=t(48730),u=t(78122),m=t(12837),x=t(40228),h=t(13861),p=t(16189),g=t(63737),b=t(83714);let y=(e,r,t)=>{try{if(!e||"Invalid Date"===e||"null"===e||"undefined"===e)return t;let s=new Date(e);if(isNaN(s.getTime()))return t;return(0,g.GP)(s,r)}catch(e){return console.error("Date formatting error:",e),t}};function f(){let e=(0,p.useRouter)(),[r,t]=(0,a.useState)([]),[g,f]=(0,a.useState)(!0),[N,j]=(0,a.useState)(!1),[v,w]=(0,a.useState)("upcoming"),[A,k]=(0,a.useState)(null),P=(0,a.useCallback)(async()=>{try{f(!0),k(null);let e=await fetch("/api/orders");if(!e.ok)throw Error("Failed to fetch orders");let r=await e.json(),s=(r.orders||r||[]).sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime());t(s)}catch(e){console.error("Error fetching orders:",e),k("Failed to load orders"),t([])}finally{f(!1)}},[]),E=async()=>{j(!0),await P(),j(!1)},D=e=>{switch(e){case"PENDING":return(0,s.jsx)(n.A,{className:"w-4 h-4 text-orange-600"});case"APPROVED":return(0,s.jsx)(d.A,{className:"w-4 h-4 text-blue-600"});case"PREPARING":return(0,s.jsx)(l.A,{className:"w-4 h-4 text-purple-600"});case"READY":return(0,s.jsx)(i.A,{className:"w-4 h-4 text-green-600"});case"SERVED":return(0,s.jsx)(d.A,{className:"w-4 h-4 text-emerald-600"});case"CANCELLED":return(0,s.jsx)(o.A,{className:"w-4 h-4 text-red-600"});default:return(0,s.jsx)(c.A,{className:"w-4 h-4 text-gray-600"})}},R=e=>{switch(e){case"PENDING":return"text-orange-800 bg-orange-100 border-orange-300";case"APPROVED":return"text-blue-800 bg-blue-100 border-blue-300";case"PREPARING":return"text-purple-800 bg-purple-100 border-purple-300";case"READY":return"text-green-800 bg-green-100 border-green-300";case"SERVED":return"text-emerald-800 bg-emerald-100 border-emerald-300";case"CANCELLED":return"text-red-800 bg-red-100 border-red-300";default:return"text-gray-800 bg-gray-100 border-gray-300"}},C=e=>{switch(e){case"PENDING":return"bg-gradient-to-r from-orange-50 to-orange-100";case"APPROVED":return"bg-gradient-to-r from-blue-50 to-blue-100";case"PREPARING":return"bg-gradient-to-r from-purple-50 to-purple-100";case"READY":return"bg-gradient-to-r from-green-50 to-green-100";case"SERVED":return"bg-gradient-to-r from-emerald-50 to-emerald-100";case"CANCELLED":return"bg-gradient-to-r from-red-50 to-red-100";default:return"bg-gradient-to-r from-gray-50 to-gray-100"}},M=e=>{switch(e){case"PENDING":return"Pending for Approval";case"APPROVED":return"Approved";case"PREPARING":return"Preparing";case"READY":return"Ready to Collect";case"SERVED":return"Served";case"CANCELLED":return"Cancelled";default:return e}},I=(r,t)=>{e.push(`/student/orders/${r}?orderNumber=${t}`)},G=(()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());switch(v){case"upcoming":return r.filter(e=>new Date(e.orderDate)>=t||["PENDING","APPROVED","PREPARING","READY"].includes(e.status));case"all":return r;default:return r.filter(e=>e.status===v)}})();return(0,s.jsxs)(b.A,{showDatePicker:!1,className:"bg-gradient-to-br from-green-50 via-white to-blue-50",children:[(0,s.jsx)("div",{className:"bg-white/90 backdrop-blur-sm border-b border-green-200 px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(i.A,{className:"w-5 h-5 text-gray-700"})}),(0,s.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"My Orders"})]}),(0,s.jsx)("button",{onClick:E,disabled:N,className:"p-2 text-gray-600 hover:text-green-600 disabled:opacity-50 rounded-full hover:bg-green-50 transition-all duration-200",children:(0,s.jsx)(u.A,{className:`w-5 h-5 ${N?"animate-spin":""}`})})]})}),(0,s.jsxs)("div",{className:"px-4 py-4",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[{key:"upcoming",label:"Upcoming"},{key:"all",label:"All Orders"},{key:"PENDING",label:"Pending"},{key:"APPROVED",label:"Approved"},{key:"PREPARING",label:"Preparing"},{key:"READY",label:"Ready"},{key:"SERVED",label:"Served"}].map(e=>(0,s.jsx)("button",{onClick:()=>w(e.key),className:`flex-shrink-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${v===e.key?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-200 hover:bg-green-50 hover:border-green-300"}`,children:e.label},e.key))})}),g?(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-3 animate-pulse border border-gray-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16 mb-1"}),(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded w-12"})]})]}),(0,s.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded"})]}),(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded w-2/3 mb-2"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-12"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-10"})]})]},e))}):A?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(o.A,{className:"w-8 h-8 text-red-600"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load orders"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:A}),(0,s.jsx)("button",{onClick:E,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white text-sm font-medium rounded-xl hover:from-green-600 hover:to-blue-600 transition-all duration-200 shadow-md",children:"Try Again"})]}):0===G.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(i.A,{className:"w-8 h-8 text-gray-600"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"upcoming"===v?"No upcoming orders":"all"===v?"No orders yet":`No ${v.toLowerCase()} orders`}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"upcoming"===v?"You don't have any upcoming orders. Place an order to get started!":"all"===v?"Your order history will appear here once you place your first order":`You don't have any ${v.toLowerCase()} orders at the moment`}),(0,s.jsx)("button",{onClick:()=>e.push("/student/menu"),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white text-sm font-medium rounded-xl hover:from-green-600 hover:to-blue-600 transition-all duration-200 shadow-md",children:"Browse Menu"})]}):(0,s.jsx)("div",{className:"space-y-3",children:G.map(e=>(0,s.jsxs)("div",{className:`${C(e.status)} rounded-2xl p-3 border border-white/50 hover:shadow-md transition-all duration-200 backdrop-blur-sm`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[D(e.status),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 text-sm",children:["#",e.orderNumber]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:[e.orderItems.length," item",1!==e.orderItems.length?"s":""]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center text-lg font-bold text-gray-900",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-1"}),(0,s.jsxs)("span",{children:["₹",e.totalAmount.toFixed(0)]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:`px-2 py-1 rounded-lg text-xs font-medium border ${R(e.status)}`,children:M(e.status)}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,s.jsx)(x.A,{className:"w-3 h-3 mr-1"}),(0,s.jsxs)("span",{children:["For ",y(e.orderDate,"MMM dd","N/A")]})]})]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("div",{className:"text-xs text-gray-700",children:[e.orderItems.slice(0,2).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-0.5",children:[(0,s.jsxs)("span",{children:[e.quantity,"x ",e.menuItem.name]}),(0,s.jsxs)("span",{className:"text-gray-500 font-medium",children:["₹",(e.price*e.quantity).toFixed(0)]})]},e.id)),e.orderItems.length>2&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 pt-0.5",children:["+",e.orderItems.length-2," more items"]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-white/70",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500",children:y(e.createdAt,"MMM dd, h:mm a","N/A")}),(0,s.jsxs)("button",{onClick:()=>I(e.id,e.orderNumber),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/80 hover:bg-white text-gray-700 text-xs font-medium rounded-lg transition-colors border border-white/50",children:[(0,s.jsx)(h.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"View"})]})]})]},e.id))})]})]})}},93613:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4243,4848,9764,3645,3714],()=>t(17976));module.exports=s})();