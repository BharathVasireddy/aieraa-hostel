"use strict";(()=>{var e={};e.id=7399,e.ids=[7399],e.modules={1708:e=>{e.exports=require("node:process")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{e.exports=require("node:tty")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{e.exports=require("node:async_hooks")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,r,t)=>{t.d(r,{z:()=>i});var a=t(38824);let i=globalThis.prisma??new a.PrismaClient},31421:e=>{e.exports=require("node:child_process")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{e.exports=require("node:os")},51455:e=>{e.exports=require("node:fs/promises")},57975:e=>{e.exports=require("node:util")},59453:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>x,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>c});var a={};t.r(a),t.d(a,{GET:()=>l});var i=t(96559),s=t(48088),n=t(37719),o=t(32190),u=t(31183);async function l(e){try{let{searchParams:r}=new URL(e.url),t=r.get("date");if(!t)return o.NextResponse.json({error:"Date parameter is required"},{status:400});let a=new Date(t);if(isNaN(a.getTime()))return o.NextResponse.json({error:"Invalid date format"},{status:400});let i=(await u.z.menuItem.findMany({where:{isActive:!0},include:{university:!0,availability:{where:{date:{gte:new Date(a.getFullYear(),a.getMonth(),a.getDate()),lt:new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}}}},orderBy:{name:"asc"}})).filter(e=>0===e.availability.length||e.availability[0].isAvailable).map(e=>{let r=e.availability[0];return{id:e.id,name:e.name,description:e.description||"",basePrice:e.basePrice,categories:e.categories,isVegetarian:e.isVegetarian,isVegan:e.isVegan,calories:e.calories||0,protein:e.protein||0,carbs:e.carbs||0,fat:e.fat||0,allergens:e.allergens,university:e.university.name,image:e.image,isAvailable:r?.isAvailable??!0,maxQuantity:r?.maxQuantity??50,currentQuantity:r?.currentQuantity??0}});return o.NextResponse.json(i)}catch(e){return console.error("Error fetching menu availability:",e),o.NextResponse.json({error:"Failed to fetch menu availability"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/menu/availability/route",pathname:"/api/menu/availability",filename:"route",bundlePath:"app/api/menu/availability/route"},resolvedPagePath:"/Users/bharat/Desktop/aieraa-hostel/src/app/api/menu/availability/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:d,workUnitAsyncStorage:c,serverHooks:x}=p;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:c})}},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{e.exports=require("node:fs")},76760:e=>{e.exports=require("node:path")},77598:e=>{e.exports=require("node:crypto")},78474:e=>{e.exports=require("node:events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[4243,580,1748],()=>t(59453));module.exports=a})();