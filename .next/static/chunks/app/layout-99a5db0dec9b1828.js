(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{347:()=>{},1937:e=>{e.exports={style:{fontFamily:"'Plus Jakarta Sans', 'Plus Jakarta Sans Fallback'",fontStyle:"normal"},className:"__className_e12b3c",variable:"__variable_e12b3c"}},2521:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var i=a(5155),r=a(2108);function l(e){let{children:t}=e;return(0,i.jsx)(r.SessionProvider,{children:t})}},2682:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,1937,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,6213)),Promise.resolve().then(a.bind(a,8932)),Promise.resolve().then(a.bind(a,2521)),Promise.resolve().then(a.bind(a,7198))},6213:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>s});var i=a(5155),r=a(2115),l=a(2108);let n=(0,r.createContext)(void 0);function s(e){var t,a;let{children:s}=e,{data:u}=(0,l.useSession)(),[o,d]=(0,r.useState)([]),[c,f]=(0,r.useState)(!1),[v,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h(!0)},[]),(0,r.useEffect)(()=>{var e;if(v){if(null==u||null==(e=u.user)?void 0:e.id){let e="cart_".concat(u.user.id);try{let t=localStorage.getItem(e);if(t){let e=JSON.parse(t);d(e)}}catch(t){console.error("Error parsing saved cart:",t),localStorage.removeItem(e)}}f(!0)}},[null==u||null==(t=u.user)?void 0:t.id,v]),(0,r.useEffect)(()=>{var e;if(v&&c&&(null==u||null==(e=u.user)?void 0:e.id)){let e="cart_".concat(u.user.id);localStorage.setItem(e,JSON.stringify(o))}},[o,c,null==u||null==(a=u.user)?void 0:a.id,v]);let m=e=>{d(t=>t.filter(t=>t.id!==e))},g=()=>o.reduce((e,t)=>e+t.price*t.quantity,0);return(0,i.jsx)(n.Provider,{value:{items:o,addItem:e=>{d(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeItem:m,updateQuantity:(e,t)=>{if(t<=0)return void m(e);d(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{var e;if(d([]),null==u||null==(e=u.user)?void 0:e.id){let e="cart_".concat(u.user.id);localStorage.removeItem(e)}},getTotalItems:()=>o.reduce((e,t)=>e+t.quantity,0),getTotalPrice:g,getSubtotal:()=>g(),isLoaded:c},children:s})}},7198:(e,t,a)=>{"use strict";a.d(t,{J:()=>u,UserProvider:()=>s});var i=a(5155),r=a(2115),l=a(2108);let n=(0,r.createContext)(void 0);function s(e){let{children:t}=e,{data:a,status:s}=(0,l.useSession)(),[u,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m(!0)},[]);let g=async()=>{var e;if(!(null==a||null==(e=a.user)?void 0:e.id)){o(null),c(!1);return}try{c(!0),v(null);let e=await fetch("/api/user/".concat(a.user.id)),t=await e.json();e.ok?o(t.user):404===e.status?(console.warn("User not found in database, forcing logout"),v("User account not found. Please login again."),await (0,l.signOut)({callbackUrl:"/auth/signin",redirect:!0})):v(t.error||"Failed to fetch user data")}catch(e){console.error("Error fetching user data:",e),v("Failed to fetch user data")}finally{c(!1)}};return(0,r.useEffect)(()=>{var e;h&&"loading"!==s&&("authenticated"===s&&(null==a||null==(e=a.user)?void 0:e.id)?g():(o(null),c(!1)))},[a,s,h]),(0,i.jsx)(n.Provider,{value:{user:u,loading:d||"loading"===s||!h,error:f,refetch:g,isMounted:h},children:t})}function u(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},8932:(e,t,a)=>{"use strict";a.d(t,{default:()=>o,g3:()=>d});var i=a(5155),r=a(760),l=a(6408),n=a(5695),s=a(2115);let u=e=>e.startsWith("/auth/")||e.startsWith("/student")||e.startsWith("/admin")?{initial:{x:"100%"},exit:{x:"-100%"}}:{initial:{opacity:0},exit:{opacity:0}};function o(e){let{children:t}=e,a=(0,n.usePathname)(),[o,d]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{d(!0)},[]),!o)return(0,i.jsx)("div",{className:"w-full min-h-full",children:t});let c=u(a);return(0,i.jsx)(r.N,{mode:"wait",children:(0,i.jsx)(l.P.div,{initial:c.initial,animate:{x:0,opacity:1,scale:1},exit:c.exit,transition:{type:"tween",ease:[.22,1,.36,1],duration:.4},className:"w-full min-h-full",children:t},a)})}function d(e){let{children:t,className:a,...r}=e;return(0,i.jsx)(l.P.button,{whileTap:{scale:.95},whileHover:{scale:1.02},transition:{type:"spring",stiffness:300,damping:20},className:a,...r,children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4041,6454,1299,8441,1684,7358],()=>t(2682)),_N_E=e.O()}]);