(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5880],{646:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},744:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},1007:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4861:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5196:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5423:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(5155),a=t(2115),l=t(5695),d=t(4186),c=t(646),n=t(744),i=t(7108),x=t(4861),o=t(7550),m=t(9074),h=t(9946);let u=(0,h.A)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var p=t(5196);let y=(0,h.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var g=t(7475),N=t(1007);let j=(0,h.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var b=t(6694);let v=(e,s,t)=>{try{if(!e||"Invalid Date"===e||"null"===e||"undefined"===e)return t;let r=new Date(e);if(isNaN(r.getTime()))return t;return(0,b.GP)(r,s)}catch(e){return console.error("Date formatting error:",e),t}};function f(){let e,s=(0,l.useParams)(),t=(0,l.useRouter)(),[h,b]=(0,a.useState)(null),[f,A]=(0,a.useState)(!0),[w,k]=(0,a.useState)(null),[E,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{M()},[s.id]);let M=async()=>{try{if(A(!0),k(null),!s.id){k("No order ID provided"),b(null);return}let e=await fetch("/api/orders/".concat(s.id));if(!e.ok){if(404===e.status)k("Order not found"),b(null);else throw Error("Failed to fetch order: ".concat(e.status));return}let t=await e.json();t.success&&t.order?b(t.order):(k("Invalid order data received"),b(null))}catch(e){console.error("Error fetching order details:",e),k("Failed to load order details"),b(null)}finally{A(!1)}},C=e=>JSON.stringify({orderId:e.id,orderNumber:e.orderNumber,studentId:e.user.id,studentName:e.user.name,totalAmount:e.totalAmount,items:e.orderItems.length,timestamp:new Date().toISOString()}),R=async()=>{if(!h)return;let e=C(h);await navigator.clipboard.writeText(e),P(!0),setTimeout(()=>P(!1),2e3)};return f?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>t.back(),className:"p-2 -ml-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",children:(0,r.jsx)(o.A,{className:"w-5 h-5"})}),(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Order Details"})]})}),(0,r.jsx)("div",{className:"px-4 py-6 space-y-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-6"}),(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"h-20 bg-gray-200 rounded-xl"},e))})]})})]}):w||!h?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(i.A,{className:"w-8 h-8 text-gray-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:w||"Order not found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Order not found"===w?"The order you're looking for doesn't exist.":"There was an error loading the order details."}),(0,r.jsx)("button",{onClick:()=>t.push("/student/orders"),className:"px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors",children:"Back to Orders"})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>t.back(),className:"p-2 -ml-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-full transition-colors",children:(0,r.jsx)(o.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h1",{className:"text-lg font-bold text-gray-900",children:["#",h.orderNumber]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Order Details"})]})]})}),(0,r.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(e=>{switch(e){case"PENDING":return(0,r.jsx)(d.A,{className:"w-5 h-5 text-orange-600"});case"APPROVED":return(0,r.jsx)(c.A,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return(0,r.jsx)(n.A,{className:"w-5 h-5 text-purple-600"});case"READY":return(0,r.jsx)(i.A,{className:"w-5 h-5 text-green-600"});case"SERVED":return(0,r.jsx)(c.A,{className:"w-5 h-5 text-emerald-600"});case"CANCELLED":return(0,r.jsx)(x.A,{className:"w-5 h-5 text-red-600"});default:return(0,r.jsx)(d.A,{className:"w-5 h-5 text-gray-600"})}})(h.status),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(e=>{switch(e){case"PENDING":return"Pending for Approval";case"APPROVED":return"Approved";case"PREPARING":return"Preparing";case"READY":return"Ready to Collect";case"SERVED":return"Served";case"CANCELLED":return"Cancelled";default:return e}})(h.status)}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(e=>{switch(e){case"PENDING":return"Your order has been placed and is waiting for approval";case"APPROVED":return"Your order has been approved and will be prepared soon";case"PREPARING":return"Your order is being prepared by the kitchen";case"READY":return"Your order is ready for collection";case"SERVED":return"Your order has been served";case"CANCELLED":return"This order was cancelled";default:return""}})(h.status)})]}),(0,r.jsx)("span",{className:"px-3 py-1.5 rounded-xl text-sm font-medium border ".concat((e=>{switch(e){case"PENDING":return"text-orange-800 bg-orange-100 border-orange-300";case"APPROVED":return"text-blue-800 bg-blue-100 border-blue-300";case"PREPARING":return"text-purple-800 bg-purple-100 border-purple-300";case"READY":return"text-green-800 bg-green-100 border-green-300";case"SERVED":return"text-emerald-800 bg-emerald-100 border-emerald-300";case"CANCELLED":return"text-red-800 bg-red-100 border-red-300";default:return"text-gray-800 bg-gray-100 border-gray-300"}})(h.status)),children:h.status})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),(0,r.jsxs)("span",{children:["For ",v(h.orderDate,"MMM dd, yyyy","N/A")]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),(0,r.jsxs)("span",{children:["Ordered ",v(h.createdAt,"MMM dd, h:mm a","N/A")]})]})]})]}),"READY"===h.status&&(0,r.jsx)("div",{className:"bg-purple-50 rounded-xl p-6 border border-purple-200",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,r.jsx)(u,{className:"w-6 h-6 text-purple-600 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Collection QR Code"})]}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block mb-4",children:(0,r.jsx)("img",{src:(e=C(h),"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(e))),alt:"Order QR Code",className:"w-48 h-48 mx-auto"})}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Show this QR code at the food counter to collect your order"}),(0,r.jsxs)("button",{onClick:R,className:"flex items-center space-x-2 mx-auto px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-colors",children:[E?(0,r.jsx)(p.A,{className:"w-4 h-4"}):(0,r.jsx)(y,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:E?"Copied!":"Copy QR Data"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[(0,r.jsx)("div",{className:"p-6 pb-0",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"})}),(0,r.jsx)("div",{className:"px-6",children:(h.orderItems||[]).map((e,s)=>{var t,a,l;return(0,r.jsx)("div",{className:"py-4 ".concat(s<((null==(t=h.orderItems)?void 0:t.length)||0)-1?"border-b border-gray-100":""),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:(null==(a=e.menuItem)?void 0:a.name)||"Unknown Item"}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity||0]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["₹",e.price||0," each"]}),(0,r.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:(null==(l=e.menuItem)?void 0:l.categories.join(", "))||"N/A"})]})]}),(0,r.jsx)("div",{className:"text-right ml-4",children:(0,r.jsxs)("div",{className:"flex items-center text-lg font-semibold text-gray-900",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-1"}),(0,r.jsxs)("span",{children:["₹",((e.price||0)*(e.quantity||0)).toFixed(0)]})]})})]})},e.id)})}),(0,r.jsx)("div",{className:"p-6 pt-0",children:(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",(h.subtotalAmount||h.totalAmount-h.taxAmount).toFixed(0)]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax & Fees"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",(h.taxAmount||0).toFixed(0)]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-lg font-semibold pt-2 border-t border-gray-200",children:[(0,r.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,r.jsxs)("div",{className:"flex items-center text-gray-900",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 mr-1"}),(0,r.jsxs)("span",{children:["₹",(h.totalAmount||0).toFixed(0)]})]})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(N.A,{className:"w-5 h-5 text-green-500 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Student Information"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[h.user.name,(0,r.jsx)("br",{}),h.user.email]})]})]}),h.specialInstructions&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(j,{className:"w-5 h-5 text-purple-500 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Special Instructions"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:h.specialInstructions})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(i.A,{className:"w-5 h-5 text-blue-500 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Payment Status"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Cash on Collection"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("PAID"===h.paymentStatus?"text-green-800 bg-green-100":"text-orange-800 bg-orange-100"),children:h.paymentStatus})]})]})]})]})]})]})]})}},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},6921:(e,s,t)=>{Promise.resolve().then(t.bind(t,5423))},7108:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7475:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]])},7550:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9074:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[4691,8441,1684,7358],()=>s(6921)),_N_E=e.O()}]);