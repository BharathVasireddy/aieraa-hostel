(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6629],{714:(e,s,t)=>{"use strict";t.d(s,{f:()=>l});var a=t(7239),r=t(9447);function l(e,s,t){let l=(0,r.a)(e,null==t?void 0:t.in);return isNaN(s)?(0,a.w)((null==t?void 0:t.in)||e,NaN):(s&&l.setDate(l.getDate()+s),l)}},4578:(e,s,t)=>{Promise.resolve().then(t.bind(t,8100))},4616:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7550:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7712:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},7809:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},8100:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(5155),r=t(2115),l=t(5695),i=t(7550),n=t(9074),c=t(4186),d=t(7712),x=t(4616),o=t(7809),u=t(714),m=t(6694),h=t(7239);function b(e){return(0,h.w)(e,Date.now())}var y=t(1183),f=t(9092);function g(e,s,t){let[a,r]=(0,y.x)(null==t?void 0:t.in,e,s);return+(0,f.o)(a)==+(0,f.o)(r)}function p(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)().get("date"),[t,y]=(0,r.useState)(()=>s?new Date(s):(0,u.f)(new Date,1)),[f,p]=(0,r.useState)([]),[j,N]=(0,r.useState)(!0),[v,w]=(0,r.useState)({}),[k,M]=(0,r.useState)("all"),A=Array.from({length:7},(e,s)=>(0,u.f)(new Date,s+1));(0,r.useEffect)(()=>{(async()=>{N(!0);try{let e=await fetch("/api/menu/availability?date=".concat((0,m.GP)(t,"yyyy-MM-dd")));if(e.ok){let s=await e.json();p(s)}}catch(e){console.error("Failed to fetch menu:",e)}finally{N(!1)}})()},[t]);let P=e=>{let s=f.find(s=>s.id===e);if(!s)return;let t=v[e]||0;(s.maxQuantity||50)-(s.currentQuantity||0)-t>0&&w(s=>({...s,[e]:t+1}))},C=e=>{w(s=>{let t={...s};return t[e]>1?t[e]--:delete t[e],t})},S=()=>Object.entries(v).reduce((e,s)=>{let[t,a]=s,r=f.find(e=>e.id===t);return e+(r?r.price*a:0)},0),D=()=>Object.values(v).reduce((e,s)=>e+s,0),O=e=>{var s,t;return g((0,h.w)(e,e),b((null==s?void 0:s.in)||e))?"Today":g(e,(0,u.f)(b(e),1),t)?"Tomorrow":(0,m.GP)(e,"EEE")},E="all"===k?f:f.filter(e=>e.category.toLowerCase()===k);return(0,a.jsxs)("div",{className:"min-h-screen bg-white pb-20",children:[(0,a.jsx)("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-100",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(i.A,{className:"w-5 h-5 mr-2"}),"Back"]}),(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Order Food"}),(0,a.jsx)("div",{})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 mr-2 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Select Date"})]}),(0,a.jsx)("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:A.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>y(e),className:"flex-shrink-0 px-4 py-3 rounded-lg text-center border transition-colors ".concat(g(t,e)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:border-blue-300"),children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:O(e)}),(0,a.jsx)("div",{className:"text-sm",children:(0,m.GP)(e,"dd")}),(0,a.jsx)("div",{className:"text-xs opacity-75",children:(0,m.GP)(e,"MMM")})]},s))})]}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2 text-blue-600"}),(0,a.jsxs)("span",{className:"text-sm text-blue-800",children:["Order by 10:00 PM today for ",(0,m.GP)(t,"MMM dd")]})]})}),(0,a.jsxs)("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[(0,a.jsxs)("button",{onClick:()=>M("all"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium ".concat("all"===k?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["All (",f.length,")"]}),["breakfast","lunch","dinner","snacks","beverages"].map(e=>{let s=f.filter(s=>s.category.toLowerCase()===e).length;return(0,a.jsxs)("button",{onClick:()=>M(e),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium capitalize ".concat(k===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e," (",s,")"]},e)})]})]})}),(0,a.jsx)("div",{className:"px-4 py-4 space-y-3",children:j?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"bg-gray-200 h-24 rounded-lg animate-pulse"},e))}):0===E.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF7D️"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items available"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Try selecting a different date or category"})]}):E.map(e=>{let s=v[e.id]||0,t=(e.maxQuantity||50)-(e.currentQuantity||0)-s,r=t<=0&&0===s;return(0,a.jsx)("div",{className:"bg-white border border-gray-100 rounded-xl p-4 shadow-sm",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),e.isVegetarian&&(0,a.jsx)("span",{className:"w-4 h-4 bg-green-100 border-2 border-green-500 rounded-sm flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})}),e.isVegan&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Vegan"}),r&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full",children:"Out of Stock"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mb-2",children:[(0,a.jsxs)("span",{children:[e.calories," cal"]}),(0,a.jsx)("span",{className:"capitalize",children:e.category}),(0,a.jsxs)("span",{children:[t+s,"/",e.maxQuantity||50," available"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["₹",e.price]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:s>0?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>C(e.id),className:"w-8 h-8 bg-red-100 text-red-600 rounded-full flex items-center justify-center hover:bg-red-200",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-8 text-center font-semibold",children:s}),(0,a.jsx)("button",{onClick:()=>P(e.id),disabled:t<=0,className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(x.A,{className:"w-4 h-4"})})]}):(0,a.jsx)("button",{onClick:()=>P(e.id),disabled:r,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Out of Stock":"Add"})})]})]})})},e.id)})}),D()>0&&(0,a.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50",children:(0,a.jsx)("div",{className:"bg-blue-600 text-white rounded-xl p-4 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:[D()," items"]}),(0,a.jsxs)("div",{className:"text-blue-100 text-sm",children:["₹",S().toFixed(2)," • ",(0,m.GP)(t,"MMM dd")]})]})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.setItem("orderCart",JSON.stringify({items:v,orderDate:(0,m.GP)(t,"yyyy-MM-dd"),total:S()})),e.push("/student/checkout")},className:"bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold hover:bg-blue-50",children:"Checkout"})]})})})]})}function j(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),children:(0,a.jsx)(p,{})})}},9074:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[4691,8441,1684,7358],()=>s(4578)),_N_E=e.O()}]);