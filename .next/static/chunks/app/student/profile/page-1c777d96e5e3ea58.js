(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3612],{381:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},744:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},811:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var t=a(5155),l=a(2115),r=a(1007),i=a(4355),n=a(5525);let c=(0,a(9946).A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var d=a(4835),o=a(2108),h=a(5695),u=a(5865),m=a(9084);function x(){var e;let{data:s}=(0,o.useSession)(),a=(0,h.useRouter)(),[x,p]=(0,l.useState)(null),[y,g]=(0,l.useState)(!0),[v,f]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{var e;(null==s||null==(e=s.user)?void 0:e.id)&&A()},[s]);let A=async()=>{try{var e;g(!0);let a=await fetch("/api/user/".concat(null==s||null==(e=s.user)?void 0:e.id));if(a.ok){let e=await a.json();p(e.user||e)}}catch(e){console.error("Error fetching user data:",e)}finally{g(!1)}},k=async e=>{var a,t;let l=null==(a=e.target.files)?void 0:a[0];if(l){if(!l.type.startsWith("image/"))return void alert("Please select a valid image file");if(l.size>5242880)return void alert("Image size must be less than 5MB");f(!0);try{new FormData().append("file",l);let e=URL.createObjectURL(l);if((await fetch("/api/user/".concat(null==s||null==(t=s.user)?void 0:t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileImage:e})})).ok)p(s=>s?{...s,profileImage:e}:null),alert("Profile image updated successfully!");else throw Error("Failed to update profile image")}catch(e){console.error("Error uploading image:",e),alert("Failed to upload image. Please try again.")}finally{f(!1)}}},M=async()=>{try{await (0,o.signOut)({redirect:!1,callbackUrl:"/auth/signin"}),a.push("/auth/signin")}catch(e){console.error("Logout error:",e)}};return y?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,t.jsx)(u.A,{title:"Profile",showNotifications:!0}),(0,t.jsx)("div",{className:"px-4 py-4",children:(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-5 bg-gray-200 rounded w-32 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 mb-1"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,t.jsx)(u.A,{title:"Profile",showNotifications:!0}),(0,t.jsxs)("div",{className:"px-4 py-4 space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center overflow-hidden",children:(null==x?void 0:x.profileImage)?(0,t.jsx)("img",{src:x.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):(0,t.jsx)(r.A,{className:"w-8 h-8 text-blue-600"})}),(0,t.jsxs)("label",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center cursor-pointer",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",disabled:v}),v?(0,t.jsx)("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}):(0,t.jsx)(i.A,{className:"w-3 h-3 text-white"})]})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:(null==x?void 0:x.name)||"Student Name"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:(null==x?void 0:x.studentId)||"Student ID: Loading..."}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:(null==x?void 0:x.roomNumber)||"Room: Not assigned"}),(0,t.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:(null==x||null==(e=x.university)?void 0:e.name)||"University Name"})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Account"})}),(0,t.jsxs)("div",{className:"space-y-0",children:[(0,t.jsxs)("button",{onClick:()=>{b(!0)},className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(r.A,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:"Edit Profile"})]}),(0,t.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,t.jsxs)("button",{onClick:()=>{w(!0)},className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(n.A,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:"Privacy & Security"})]}),(0,t.jsx)("span",{className:"text-gray-400",children:"›"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Support"})}),(0,t.jsxs)("div",{className:"space-y-0",children:[(0,t.jsxs)("button",{onClick:()=>{a.push("/student/help-support")},className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(c,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-900",children:"Help & Support"})]}),(0,t.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,t.jsxs)("button",{onClick:()=>{window.confirm("Would you like to rate our app? This will open your app store.")&&window.open("https://play.google.com/store","_blank")},className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:"⭐"}),(0,t.jsx)("span",{className:"text-gray-900",children:"Rate Our App"})]}),(0,t.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCF1"}),(0,t.jsx)("span",{className:"text-gray-900",children:"App Version"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"v1.0.0"})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm",children:(0,t.jsxs)("button",{onClick:M,className:"w-full flex items-center justify-between p-4 hover:bg-red-50 text-red-600 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Logout"})]}),(0,t.jsx)("span",{className:"text-red-400",children:"›"})]})})]}),(0,t.jsx)(m.A,{})]})}},1007:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2713:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3861:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},4186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4355:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4783:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},4835:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},5525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5865:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(5155),l=a(4783),r=a(7924),i=a(3861);function n(e){let{title:s,showSearch:a=!1,showNotifications:n=!0,showMenu:c=!1,onMenuClick:d,rightElement:o}=e;return(0,t.jsx)("header",{className:"sticky top-0 z-40 bg-white border-b border-gray-200 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[c&&(0,t.jsx)("button",{onClick:d,className:"mr-3 p-2 -ml-2 rounded-lg hover:bg-gray-100",children:(0,t.jsx)(l.A,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:s})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100",children:(0,t.jsx)(r.A,{className:"h-5 w-5 text-gray-600"})}),n&&(0,t.jsxs)("button",{className:"p-2 rounded-lg hover:bg-gray-100 relative",children:[(0,t.jsx)(i.A,{className:"h-5 w-5 text-gray-600"}),(0,t.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),o]})]})})}},7340:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},7671:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]])},7924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8557:(e,s,a)=>{Promise.resolve().then(a.bind(a,811))},9084:(e,s,a)=>{"use strict";a.d(s,{A:()=>x});var t=a(5155),l=a(7340),r=a(7671),i=a(4186),n=a(381);let c=(0,a(9946).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var d=a(744),o=a(2713),h=a(5695),u=a(2115),m=a(2108);function x(){var e,s;let a=(0,h.useRouter)(),x=(0,h.usePathname)(),{data:p}=(0,m.useSession)(),y=(0,u.useCallback)(e=>{x!==e&&a.push(e)},[a,x]),g=(null==p||null==(e=p.user)?void 0:e.role)==="ADMIN"||(null==p||null==(s=p.user)?void 0:s.role)==="MANAGER"?"manager":"student",v=[{icon:l.A,label:"Home",path:"/student",isActive:"/student"===x},{icon:r.A,label:"Menu",path:"/student/menu",isActive:"/student/menu"===x},{icon:i.A,label:"Orders",path:"/student/orders",isActive:"/student/orders"===x},{icon:n.A,label:"Profile",path:"/student/profile",isActive:"/student/profile"===x}],f=[{icon:l.A,label:"Dashboard",path:"/admin",isActive:"/admin"===x},{icon:c,label:"Orders",path:"/admin/orders",isActive:"/admin/orders"===x},{icon:d.A,label:"Menu",path:"/admin/menu",isActive:"/admin/menu"===x},{icon:o.A,label:"Analytics",path:"/admin/analytics",isActive:"/admin/analytics"===x},{icon:n.A,label:"Settings",path:"/admin/settings",isActive:"/admin/settings"===x}];return"/"===x||x.startsWith("/auth/")?null:(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 safe-area-pb",children:(0,t.jsx)("div",{className:"grid ".concat("manager"===g?"grid-cols-5":"grid-cols-4"),children:("student"===g?v:f).map(e=>{let s=e.icon;return(0,t.jsxs)("button",{onClick:()=>y(e.path),className:"flex flex-col items-center justify-center py-3 px-1 transition-colors duration-200 ".concat(e.isActive?"text-green-600 bg-green-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"),children:[(0,t.jsx)(s,{className:"".concat("manager"===g?"w-4 h-4":"w-5 h-5"," mb-1")}),(0,t.jsx)("span",{className:"font-medium ".concat("manager"===g?"text-[10px]":"text-xs"),children:e.label})]},e.path)})})})}},9946:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var t=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)((e,s)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:h,...u}=e;return(0,t.createElement)("svg",{ref:s,...i,width:l,height:l,stroke:a,strokeWidth:c?24*Number(n)/Number(l):n,className:r("lucide",d),...u},[...h.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(o)?o:[o]])}),c=(e,s)=>{let a=(0,t.forwardRef)((a,i)=>{let{className:c,...d}=a;return(0,t.createElement)(n,{ref:i,iconNode:s,className:r("lucide-".concat(l(e)),c),...d})});return a.displayName="".concat(e),a}}},e=>{var s=s=>e(e.s=s);e.O(0,[6454,8441,1684,7358],()=>s(8557)),_N_E=e.O()}]);